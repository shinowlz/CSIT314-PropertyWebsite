{% extends 'base.html' %}
{% load static %}


{% block head %}

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<!--IE Compatibility Meta-->
<meta name="author" content="Ashwin John Dibu" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="Property List page of million estate site">
<link href="{% static 'images/favicon/crown.png' %}" rel="icon">

<!-- Stylesheets
============================================= -->
    <link href="{% static 'main/css/external.css' %}" rel="stylesheet">
    <link href="{% static 'main/css/bootstrap.min.css' %}" rel="stylesheet">
    <link href="{% static 'main/css/style.css' %}" rel="stylesheet">

<title> Property List | TheMillionEstate</title>
<style>
    .image-resize{
        height: 240px;
        object-fit: cover;
        object-position: center;
    }
    .image-resize-hero{
        height: 650px;
        width: 100%;
        object-fit: cover;
        object-position: center;
    }
    .bg-image{
        background: linear-gradient(rgba(6, 29, 53, 0.483),rgba(6, 29, 53, 0.483)), url("https://thumbs.dreamstime.com/b/real-estate-agent-offer-house-represented-model-wide-banner-composition-bokeh-background-63596018.jpg");
        background-repeat: no-repeat;
        background-size: cover;
        height: 620px;
        width: 100%;
    }
</style>
<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">

{% endblock %}

{% block content %}
  <!-- map
============================================ -->
<section id="map" class="hero-map pt-0 pb-0">
    <div class="container-fluid pr-0 pl-0">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12">
                    <div class="bg-image">
                         
                    </div>
            </div>
            <!-- .col-md-12 end -->
        </div>
        <!-- .row end -->
    </div>
    <!-- .container end -->
    <div class="search-properties">
        <div class="container">
            <div class="row">
                <div class="col-xs-12 col-sm-12 col-md-12">
                        <form class="mb-0" action="{% url 'propertys' %}">
                        <div class="form-box">
                            <div class="row">
                                <div class="col-xs-12 col-sm-6 col-md-3">
                                    <div class="form-group">
                                        <input type="search" id="search" name="search"  class="form-control" placeholder="Search Locality" />


                                        <!-- <div class="select--box">
                                            <i class="fa fa-angle-down"></i>
                                            <select name="select-location" id="select-location">
                                                <option>Any Location</option>
                                                <option>Alabama</option>
                                                <option>Alaska</option>
                                                <option>California</option>
                                                <option>Florida</option>
                                                <option>Mississippi</option>
                                                <option>Oregon</option>
                                            </select>
                                        </div> -->

                                    </div>
                                </div>
                                <!-- .col-md-3 end -->
                                <div class="col-xs-12 col-sm-6 col-md-3">
                                    <div class="form-group">
                                        <div class="select--box">
                                            <i class="fa fa-angle-down"></i>
                                            <select name="property-type" id="select-type">
                                                <option value="">Any Type</option>
                                                {% for property_type in property_types %}
                                                <option value="{{property_type.id}}" >{{property_type}}</option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <!-- .col-md-3 end -->
                                <div class="col-xs-12 col-sm-6 col-md-3">
                                    <div class="form-group">
                                        <div class="select--box">
                                            <i class="fa fa-angle-down"></i>
                                            <select name="property-status" id="select-status">
                                                <option value="">Any Status</option>
                                                {% for property_for in property_for %}
                                                <option value="{{property_for.id}}">{{ property_for.property_for_name }}</option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <!-- .col-md-3 end -->
                                <div class="col-xs-12 col-sm-6 col-md-3">
                                    <input type="submit" class="btn btn--primary btn--block mb-30">
                                </div>
                                <!-- .col-md-3 end -->
                                <div class="col-xs-12 col-sm-6 col-md-3 option-hide">
                                    <div class="form-group">
                                        <div class="select--box">
                                            <i class="fa fa-angle-down"></i>
                                            <select name="property-beds" id="select-beds">
                                                <option value="">Beds</option>
                                                
                                                <option value="1">1</option>
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                                <option value="4">4</option>
                                                <option value="5">5</option>
                                           

                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <!-- .col-md-3 end -->
                                <div class="col-xs-12 col-sm-6 col-md-3 option-hide">
                                    <div class="form-group">
                                        <div class="select--box">
                                            <i class="fa fa-angle-down"></i>
                                            <select name="property-baths" id="select-baths">
                                                <option value="">Baths</option>
                                                <option value="1">1</option>
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                                <option value="4">4</option>
                                                <option value="5">5</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <!-- .col-md-3 end -->
                                <!-- <div class="col-xs-12 col-sm-6 col-md-6 option-hide">
                                    <div class="filter mb-30">
                                        <p>
                                            <label for="amount">Price Range: </label>
                                            <input id="amount" type="text" class="amount" readonly>
                                        </p>
                                        <div class="slider-range"></div>
                                    </div>
                                </div> -->
                                <!-- .col-md-3 end -->
                                <div class="col-xs-12 col-sm-12 col-md-12">
                                    <a href="#" class="less--options">Less options</a>
                                </div>
                            </div>
                            <!-- .row end -->
                        </div>
                        <!-- .form-box end -->
                        </form>
                </div>
                <!-- .col-md-12 end -->
            </div>
            <!-- .row end -->
        </div>
        <!-- .container end -->
    </div>
</section>
<!-- #map end -->

<!-- properties-grid
============================================= -->
<section id="properties-grid">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-4">
                <!-- widget property type
=============================-->
                <div class="widget widget-property">
                    <div class="widget--title">
                        <h5>Property Type</h5>
                    </div>
                    <div class="widget--content">
                        
                        <ul class="list-unstyled mb-0">
                            <li>
                                <a href="{% url 'propertys' %}"> All <span></span></a>
                            </li>
                            {% for property_type2 in property_types %}
                            <li>
                                <a href="{{property_type2.get_url}}">{{property_type2.property_type_name}} <span></span></a>
                            </li>
                            {% endfor %}
                           
                        </ul>
                    </div>
                </div>
                <!-- . widget property type end -->

                <!-- widget property status
=============================-->
                <div class="widget widget-property">
                    <div class="widget--title">
                        <h5>Property Status</h5>
                    </div>
                    <div class="widget--content">
                        <ul class="list-unstyled mb-0">
                            {% for property_for in property_status %}
                            <li>
                                <a href="#">For {{property_for.property_for_name}} <span></span></a>
                            </li>
                            {% endfor %}
                        </ul>
                    </div>
                </div>
                <!-- . widget property status end -->


                <!-- widget property city
=============================-->


                <!-- <div class="widget widget-property">
                    <div class="widget--title">
                        <h5>Property By City</h5>
                    </div>
                    <div class="widget--content">
                        <ul class="list-unstyled mb-0">
                            <li>
                                <a href="#">London <span>(5)</span></a>
                            </li>
                            <li>
                                <a href="#">Sydney <span>(10)</span></a>
                            </li>
                            <li>
                                <a href="#">New York <span>(4)</span></a>
                            </li>
                            <li>
                                <a href="#">Paris <span>(7)</span></a>
                            </li>
                        </ul>
                    </div>
                </div> -->

                <!-- . widget property city end -->


                <!-- widget featured property
=============================-->
                <div class="widget widget-featured-property">
                    <div class="widget--title">
                        <h5>Featured Properties</h5>
                    </div>
                    <div class="widget--content">
                        <div class="carousel carousel-dots" data-slide="1" data-slide-rs="1" data-autoplay="false" data-nav="false" data-dots="true" data-space="0" data-loop="true" data-speed="800">
                            <!-- .property-item #1 -->
                            <div class="property-item">
                                <div class="property--img">
                                    <img src="assets/images/properties/13.jpg" alt="property image" class="img-responsive">
                                    <span class="property--status">For Rent</span>
                                </div>
                                <div class="property--content">
                                    <div class="property--info">
                                        <h5 class="property--title"><a href="property-single-gallery.html">House in Chicago</a></h5>
                                        <p class="property--location">1445 N State Pkwy, Chicago, IL 60610</p>
                                        <p class="property--price">$1200<span class="time">month</span></p>
                                    </div>
                                    <!-- .property-info end -->
                                </div>
                            </div>
                            <!-- .property item end -->
                            <!-- .property-item #2 -->
                            <div class="property-item">
                                <div class="property--img">
                                    <img src="assets/images/properties/2.jpg" alt="property image" class="img-responsive">
                                    <span class="property--status">For Rent</span>
                                </div>
                                <div class="property--content">
                                    <div class="property--info">
                                        <h5 class="property--title"><a href="property-single-gallery.html">Villa in Oglesby Ave</a></h5>
                                        <p class="property--location">1035 Oglesby Ave, Chicago, IL 60617</p>
                                        <p class="property--price">$130,000<span class="time">month</span></p>
                                    </div>
                                    <!-- .property-info end -->
                                </div>
                            </div>
                            <!-- .property item end -->
                            <!-- .property-item #3 -->
                            <div class="property-item">
                                <div class="property--img">
                                    <img src="assets/images/properties/3.jpg" alt="property image" class="img-responsive">
                                    <span class="property--status">For Sale</span>
                                </div>
                                <div class="property--content">
                                    <div class="property--info">
                                        <h5 class="property--title"><a href="property-single-gallery.html">Apartment in Long St.</a></h5>
                                        <p class="property--location">34 Long St, Jersey City, NJ 07305</p>
                                        <p class="property--price">$70,000</p>
                                    </div>
                                    <!-- .property-info end -->
                                </div>
                            </div>
                            <!-- .property item end -->
                        </div>
                        <!-- .carousel end -->
                    </div>
                </div>


                
                <!-- . widget featured property end -->
            </div>
            <!-- .col-md-4 end -->
            <div class="col-xs-12 col-sm-12 col-md-8">
                <p style="font-weight: 700; font-size: 2em; color: rgb(111, 111, 111); text-align:center; " >{{property_type_category.property_type_name}}</p>
                <div class="row">
                    
                    <div class="col-xs-12 col-sm-12 col-md-12">


                        <div class="col-xs-12 col-sm-12 col-md-12 text-center mt-50">
                            
                            <ul class="pagination">
                                {% if propertys.has_previous %}
                                <li>
                                    <a href="?page=1" ><span >First</span></a>
                                </li>
                                <li>
                                    <a href="?page={{propertys.previous_page_number}}" ><span ><i class="fa fa-angle-left"></i></span></a>
                                </li>
                                {% endif %}
                                {% for i in propertys.paginator.page_range %}
                                            {% if propertys.number == i %}
                                <li class="active"><a href="#">{{i}}</a></li>
                                {% else %}
                                <li class=""><a href="?page={{i}}">{{i}}</a></li>
                                {% endif %}
                                {% endfor %}
                                {% if propertys.has_next %}
                                <li>
                                    <a href="?page={{propertys.next_page_number}}" aria-label="Next">
                        <span aria-hidden="true"><i class="fa fa-angle-right"></i></span>
                    </a>
                                </li>
                                {% endif %}
                            </ul>
                        </div>


                        <div class="properties-filter clearfix">
                            <div class="select--box pull-left">
                                <label>Sort by:</label>
                                <i class="fa fa-angle-up"></i>
                                <i class="fa fa-angle-down"></i>

                               
                    <select id="sort-by" onchange="location = finalurl();" >
                        <option id="placeholder" disabled selected hidden value="">Default Sorting</option>
                        <option id="-created_at" value="-created_at" >Newest Items</option>
                        <option id="created_at" value="created_at" >Oldest Items</option>
                        <option id="-price" value="-price">Highest Price</option>
                        <option id="price" value="price">Lowest Price</option>

                    </select>

                            </div>
                            <!-- .select-box -->
                            <div class="view--type pull-right">
                                <a id="switch-list" href="#" class=""><i class="fa fa-th-list"></i></a>
                                <a id="switch-grid" href="#" class="active"><i class="fa fa-th-large"></i></a>
                            </div>
                        </div>
                    </div>
                    <div class="properties properties-grid">
                        <!-- .col-md-12 end -->
                        {% if propertys %}
                        
                        {% for property in propertys %}
                        <div class="col-xs-12 col-sm-6 col-md-6">
                            <!-- .property-item #1 -->
                            <div class="property-item">
                                <div class="property--img">
                                    <a href="{% url 'property_single' property.id %}">
                        {% if property.featured_image %}
                        <img src="{{property.featured_image.url}}" alt="property image" class="img-responsive image-resize">
                        {% else %}

                        {% endif %}
                        </a>
                                    <span class="property--status">For {{property.property_for_id.property_for_name}}</span>
                                </div>
                                <div class="property--content">
                                    <div class="property--info">
                                        <h5 class="property--title"><a href="{% url 'property_single' property.id %}">{{property.title}}</a></h5>
                                        <p class="property--location">{{property.locality}}</p>
                                        <p class="property--price">${{property.prop_currency}}</p>
                                    </div>
                                    <!-- .property-info end -->
                                    <div class="property--features">
                                        <ul class="list-unstyled mb-0">
                                            <li><span class="feature">Beds:</span><span class="feature-num">{{property.bedroom}}</span></li>
                                            <li><span class="feature">Baths:</span><span class="feature-num">{{property.bathroom}}</span></li>
                                            <li><span class="feature">Carpet Area:</span><span class="feature-num">{{property.carpet_area}} sq ft</span></li>
                                        </ul>
                                    </div>
                                    <!-- .property-features end -->
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                        {% endif %}
                        <!-- .property item end -->



                    </div>


                    <div class="col-xs-12 col-sm-12 col-md-12 text-center mt-50">
                        <ul class="pagination">
                            {% if propertys.has_previous %}
                            <li>
                                <a href="?page=1" ><span >First</span></a>
                            </li>
                            <li>
                                <a href="?page={{propertys.previous_page_number}}" ><span ><i class="fa fa-angle-left"></i></span></a>
                            </li>
                            {% endif %}
                            {% for i in propertys.paginator.page_range %}
                                        {% if propertys.number == i %}
                            <li class="active"><a href="#">{{i}}</a></li>
                            {% else %}
                            <li class=""><a href="?page={{i}}">{{i}}</a></li>
                            {% endif %}
                            {% endfor %}
                            {% if propertys.has_next %}
                            <li>
                                <a href="?page={{propertys.next_page_number}}" value="{{propertys.next_page_number}}" id="paginatorpage" onclick="location = finalurl2()" aria-label="Next">
                    <span   aria-hidden="true"><i class="fa fa-angle-right"></i></span>
                </a>
                            </li>
                            {% endif %}
                        </ul>
                    </div>
                    <!-- .col-md-12 end -->
                </div>
                <!-- .row -->
            </div>
            <!-- .col-md-8 end -->
        </div>
        <!-- .row -->
    </div>
    <!-- .container -->
</section>
<!-- #properties-grid  end  -->

<!-- cta #1
============================================= -->
<section id="cta" class="cta cta-1 text-center bg-overlay bg-overlay-dark pt-90">
    <div class="bg-section"><img src="assets/images/cta/bg-1.jpg" alt="Background"></div>
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-6 col-md-offset-3">
                <h3>Join our professional team & agents to start selling your house</h3>
                <a href="#" class="btn btn--primary">Contact</a>
            </div>
            <!-- .col-md-6 -->
        </div>
        <!-- .row -->
    </div>
    <!-- .container -->
</section>
<!-- #cta1 end -->
<!-- Footer #1
============================================= -->

</div>
<!-- #wrapper end -->

<!-- Footer Scripts
============================================= -->
<script>

    function get(name){
        if(name = (new RegExp('[?&]' + encodeURIComponent(name)+ '=([^&]*)')).exec(location.search))
        return decodeURIComponent(name[1]);
    }

    if(get('ordering'))
    document.getElementById('placeholder').innerHTML = document.getElementById(get('ordering')).innerHTML

    function finalurl(){
        var url = new URL(window.location.href);
        console.log(url)
        var search_params = url.searchParams;
        search_params.set('ordering', document.getElementById("sort-by").value);
        url.search = search_params
        var new_url = url.toString();
        console.log(new_url)
        return new_url
    }

    function finalurl2(){
        var url = new URL(window.location.href);
        console.log(url)
        var search_params = url.searchParams;
        search_params.set('page', document.getElementById("paginatorpage").value);
        url.search = search_params
        var new_url = url.toString();
        console.log(new_url)
        return new_url
    }

</script>

<script src="https://code.jquery.com/jquery-3.6.1.min.js" integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js" integrity="sha256-lSjKY0/srUM9BE3dPm+c4fBo1dky2v27Gdjm2uoZaL0=" crossorigin="anonymous"></script>

<script>
    //for giving suggestions in search box by calling an API
    $(function(){ 
        $("#search").autocomplete({
            source: '{% url "suggestionapi" %}',
            minLength: 2
    }); 
});
</script>



<script src="{% static 'main/js/jquery-2.2.4.min.js'%}"></script>
<script src="{% static 'main/js/plugins.js'%}"></script>
<script src="{% static 'main/js/functions.js'%}"></script>
<script src="http://maps.google.com/maps/api/js?sensor=true&amp;key=AIzaSyCiRALrXFl5vovX0hAkccXXBFh7zP8AOW8"></script>
<script src="{% static 'main/js/plugins/jquery.gmap.min.js'%}"></script>
<script src="{% static 'main/js/map-addresses.js'%}"></script>
<script src="{% static 'main/js/map-custom.js'%}"></script>
{% endblock %}